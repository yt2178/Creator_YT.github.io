<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>כלים לשיפור חווית הגלישה</title>
  <style>
    body {
      font-family: 'Heebo', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      padding: 2rem;
      margin: 0;
      direction: rtl;
      min-height: 100vh;
      box-sizing: border-box;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.1);
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }
    h1 {
      margin-bottom: 2rem;
      text-align: center;
      border-bottom: 2px solid rgba(255,255,255,0.3);
      padding-bottom: 1rem;
    }
    .tool-section {
      background: rgba(255, 255, 255, 0.15);
      padding: 1.5rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }
    h2 {
      margin-top: 0;
      margin-bottom: 1rem;
    }
    p {
      line-height: 1.7;
      margin-top: 0;
    }
    a.bookmarklet {
      display: inline-block;
      background-color: #007bff;
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      text-decoration: none;
      font-size: 1.2rem;
      cursor: grab;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      user-select: none;
      transition: background-color 0.3s ease, transform 0.2s ease;
      margin-top: 1rem;
    }
    a.bookmarklet:hover {
      background-color: #0056b3;
      transform: translateY(-2px);
    }
    a.bookmarklet.secondary {
        background-color: #28a745;
    }
    a.bookmarklet.secondary:hover {
        background-color: #218838;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>סרגל הכלים שלי</h1>

    <!-- ====================================================== -->
    <!--            כלי מס' 1: הכלי הכללי (ללא שינוי)            -->
    <!-- ====================================================== -->
    <div class="tool-section">
      <h2>כלי כללי להחלפת כיווניות (RTL/LTR)</h2>
      <p>
        זהו כלי אוניברסלי שנועד לעבוד על <strong>כל אתר אינטרנט</strong>.
        גררו את הכפתור לסרגל הסימניות. בלחיצה עליו, יתווסף לדף כפתור צף שיאפשר לכם להחליף את כיוון הכתיבה של הדף כולו בין ימין-לשמאל (RTL) לשמאל-לימין (LTR).
      </p>
       <a href="javascript:(()=>{setTimeout(()=>{const t=document.getElementById('dir-toggle-btn');if(t)return t.style.display='flex',void localStorage.removeItem('btnHidden');const e=document.createElement('button');e.id='dir-toggle-btn';const o=document.createElement('button');o.textContent='×',o.title='הסתר כפתור',o.type='button';const n=document.createElement('span');e.appendChild(o),e.appendChild(n),Object.assign(e.style,{position:'fixed',padding:'8px 12px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',fontFamily:'Arial, sans-serif',cursor:'grab',boxShadow:'0 4px 8px rgba(0,0,0,0.2)',zIndex:'99999',userSelect:'none',touchAction:'none',display:'flex',alignItems:'center',gap:'8px',transition:'background-color .3s ease'}),Object.assign(o.style,{background:'rgba(255,255,255,.2)',border:'none',color:'#fff',fontWeight:'bold',fontSize:'16px',cursor:'pointer',padding:'0',margin:'0',lineHeight:'1',width:'18px',height:'18px',display:'flex',justifyContent:'center',alignItems:'center',borderRadius:'50%',transition:'background-color .3s ease'});e.onmouseenter=()=>e.style.backgroundColor='#0056b3',e.onmouseleave=()=>e.style.backgroundColor='#007bff',o.onmouseenter=()=>o.style.backgroundColor='rgba(255,255,255,.5)',o.onmouseleave=()=>o.style.backgroundColor='rgba(255,255,255,.2)';const i=localStorage.getItem('direction');i&&(document.documentElement.dir=i),n.textContent='rtl'===document.documentElement.dir?'החלף ל-LTR':'החלף ל-RTL';let s=!1;e.addEventListener('click',t=>{if(s||t.target===o)return;const i=document.documentElement,l='rtl'===i.dir?'ltr':'rtl';i.dir=l,n.textContent='rtl'===l?'החלף ל-LTR':'החלף ל-RTL',localStorage.setItem('direction',l)}),e.onmousedown=t=>{if(0!==t.button)return;s=!1;let o=t.clientX,n=t.clientY;e.style.cursor='grabbing';const i=e.getBoundingClientRect(),l=t.clientX-i.left,c=t.clientY-i.top;const a=d=>{const i=d.clientX-o,r=d.clientY-n;if(!s&&(Math.abs(i)>5||Math.abs(r)>5))s=!0;if(!s)return;let t=d.clientX-l,a=d.clientY-c;const u=window.innerWidth-e.offsetWidth,g=window.innerHeight-e.offsetHeight;t=Math.min(Math.max(0,t),u),a=Math.min(Math.max(0,a),g),e.style.left=t+'px',e.style.top=a+'px',e.style.right='auto',e.style.bottom='auto'},r=()=>{document.removeEventListener('mousemove',a),document.removeEventListener('mouseup',r),e.style.cursor='grab',s&&localStorage.setItem('btnPos',JSON.stringify({left:e.style.left,top:e.style.top})),setTimeout(()=>s=!1,0)};document.addEventListener('mousemove',a),document.addEventListener('mouseup',r)},e.ondragstart=()=>!1,o.onclick=t=>{t.stopPropagation(),e.style.display='none',localStorage.setItem('btnHidden','true')};const l=localStorage.getItem('btnPos');l?Object.assign(e.style,JSON.parse(l)):(e.style.left='20px',e.style.top='20px');'true'===localStorage.getItem('btnHidden')&&(e.style.display='none'),document.body.appendChild(e)},200)})();" class="bookmarklet" draggable="true">
        גרור אותי (כללי) ←
      </a>
    </div>

    <!-- ====================================================== -->
    <!--     כלי מס' 2: הכלי הייעודי - עם אסטרטגיית CSP-safe     -->
    <!-- ====================================================== -->
    <div class="tool-section">
      <h2>כלי ייעודי לתיקון עיצוב בממשקי צ'אט</h2>
      <p>
        כלי זה מיועד ספציפית לממשקי צ'אט (כמו Gemini) שבהם יש בעיות תצוגה בעברית. הוא עוקף את מגבלות האבטחה (CSP) של אתרים מודרניים על ידי שינוי עיצוב ישיר של האלמנטים.
      </p>
      <a href="javascript:(()=>{setTimeout(()=>{const t='css-toggle-btn',e='cssBtnPos',o='cssBtnHidden',i='stylesApplied';if(document.getElementById(t))return document.getElementById(t).style.display='flex',void localStorage.removeItem(o);const s=[{selector:'ms-chat-turn:not(:has(ms-thought-chunk)) .chat-turn-container, div.user-prompt-container, div.text-wrapper',styles:{direction:'rtl',textAlign:'right'}},{selector:'ms-code-block, ms-code-block pre, ms-code-block code',styles:{direction:'ltr',textAlign:'left'}},{selector:'ms-cmark-node ol, ms-cmark-node ul',styles:{paddingRight:'20px',paddingLeft:'0'}},{selector:'ms-chat-turn:has(ms-thought-chunk) .chat-turn-container',styles:document.documentElement.classList.contains('translated-rtl')?{direction:'rtl',textAlign:'right'}:{}}],n=t=>{s.forEach(e=>{document.querySelectorAll(e.selector).forEach(o=>{for(const s in e.styles)o.style[s]=t?e.styles[s]:''})})},l=document.createElement('button');l.id=t;const d=document.createElement('button');d.textContent='×',d.title='הסתר כפתור',d.type='button';const c=document.createElement('span');l.appendChild(d),l.appendChild(c),Object.assign(l.style,{position:'fixed',padding:'8px 12px',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',fontFamily:'Arial, sans-serif',cursor:'grab',boxShadow:'0 4px 8px rgba(0,0,0,0.2)',zIndex:'99998',userSelect:'none',touchAction:'none',display:'flex',alignItems:'center',gap:'8px',transition:'background-color .3s ease'}),Object.assign(d.style,{background:'rgba(255,255,255,.2)',border:'none',color:'#fff',fontWeight:'bold',fontSize:'16px',cursor:'pointer',padding:'0',margin:'0',lineHeight:'1',width:'18px',height:'18px',display:'flex',justifyContent:'center',alignItems:'center',borderRadius:'50%',transition:'background-color .3s ease'});const a=()=>{const t='true'===localStorage.getItem(i);l.style.backgroundColor=t?'#c82333':'#28a745',c.textContent=t?'הסר תיקונים':'החל תיקונים'};let r=!1;l.onmouseenter=()=>{'true'===localStorage.getItem(i)?l.style.backgroundColor='#a71d2a':l.style.backgroundColor='#218838'},l.onmouseleave=a,d.onmouseenter=()=>d.style.backgroundColor='rgba(255,255,255,.5)',d.onmouseleave=()=>d.style.backgroundColor='rgba(255,255,255,.2)',l.addEventListener('click',t=>{if(r||t.target===d)return;const e='true'!==localStorage.getItem(i);localStorage.setItem(i,String(e)),n(e),a()}),d.onclick=t=>{t.stopPropagation(),l.style.display='none',localStorage.setItem(o,'true')},l.onmousedown=t=>{if(0!==t.button)return;r=!1;let o=t.clientX,i=t.clientY;l.style.cursor='grabbing';const s=l.getBoundingClientRect(),d=t.clientX-s.left,c=t.clientY-s.top,u=t=>{const s=t.clientX-o,a=t.clientY-i;if(!r&&(Math.abs(s)>5||Math.abs(a)>5))r=!0;if(!r)return;let e=t.clientX-d,n=t.clientY-c;const p=window.innerWidth-l.offsetWidth,g=window.innerHeight-l.offsetHeight;e=Math.min(Math.max(0,e),p),n=Math.min(Math.max(0,n),g),l.style.left=e+'px',l.style.top=n+'px',l.style.right='auto',l.style.bottom='auto'},p=()=>{document.removeEventListener('mousemove',u),document.removeEventListener('mouseup',p),l.style.cursor='grab',r&&localStorage.setItem(e,JSON.stringify({left:l.style.left,top:l.style.top})),setTimeout(()=>r=!1,0)};document.addEventListener('mousemove',u),document.addEventListener('mouseup',p)},l.ondragstart=()=>!1;const u=localStorage.getItem(e);u?Object.assign(l.style,JSON.parse(u)):(l.style.left='20px',l.style.top='80px');'true'===localStorage.getItem(o)&&(l.style.display='none');const p='true'===localStorage.getItem(i);n(p),a(),document.body.appendChild(l)},200)})();" class="bookmarklet secondary" draggable="true">
        גרור אותי (לצ'אט) ←
      </a>
    </div>

  </div>

</body>
</html>
